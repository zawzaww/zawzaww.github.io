<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Containers from Scratch: Deep Dive into Single-Host Container Networking" /><meta property="og:locale" content="en_US" /><meta name="description" content="This article focused on a deep dive into Container networking; how to run Containers and configure Container Networking from scratch using the tools, such as Linux Namespaces, chroot, unshare and ip. This article also provides a hands-on practical guide on how to run and configure from scratch using these tools. You’ll mainly learn how Container Networking works at the underlying layer (or low level), and then you’ll clearly understand how Docker Container Networking works." /><meta property="og:description" content="This article focused on a deep dive into Container networking; how to run Containers and configure Container Networking from scratch using the tools, such as Linux Namespaces, chroot, unshare and ip. This article also provides a hands-on practical guide on how to run and configure from scratch using these tools. You’ll mainly learn how Container Networking works at the underlying layer (or low level), and then you’ll clearly understand how Docker Container Networking works." /><link rel="canonical" href="https://zawzaw.blog/posts/deep-dive-single-host-container-net/" /><meta property="og:url" content="https://zawzaw.blog/posts/deep-dive-single-host-container-net/" /><meta property="og:site_name" content="Zaw Zaw" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-03-15T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Containers from Scratch: Deep Dive into Single-Host Container Networking" /><meta name="twitter:site" content="@zawzaw_me" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-03-15T00:00:00+00:00","datePublished":"2025-03-15T00:00:00+00:00","description":"This article focused on a deep dive into Container networking; how to run Containers and configure Container Networking from scratch using the tools, such as Linux Namespaces, chroot, unshare and ip. This article also provides a hands-on practical guide on how to run and configure from scratch using these tools. You’ll mainly learn how Container Networking works at the underlying layer (or low level), and then you’ll clearly understand how Docker Container Networking works.","headline":"Containers from Scratch: Deep Dive into Single-Host Container Networking","mainEntityOfPage":{"@type":"WebPage","@id":"https://zawzaw.blog/posts/deep-dive-single-host-container-net/"},"url":"https://zawzaw.blog/posts/deep-dive-single-host-container-net/"}</script><title> Containers from Scratch: Deep Dive into Single-Host Container Networking | Zaw Zaw</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/images/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/images/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Zaw Zaw"><meta name="application-name" content="Zaw Zaw"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/images/favicons/favicon-16x16.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Zaw Zaw</a></div><div class="site-subtitle font-italic">ZAW's Library & Personal Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/photography/" class="nav-link"> <i class="fa-fw fas fa-image ml-xl-3 mr-xl-3 unloaded"></i> <span>PHOTOGRAPHY</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fas fa-phone ml-xl-3 mr-xl-3 unloaded"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/zawzaww" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://x.com/zawzaw_me" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-x-twitter"></i> </a> <a href="https://www.linkedin.com/in/zawzaww" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/zawzaw.me" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zawzthein','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Containers from Scratch: Deep Dive into Single-Host Container Networking</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Containers from Scratch: Deep Dive into Single-Host Container Networking</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Containers from Scratch: Deep Dive into Single-Host Container Networking</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Zaw Zaw </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Mar 15, 2025, 12:00 AM +0000" prep="on" > Mar 15 <i class="unloaded">2025-03-15T00:00:00+00:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4558 words">25 min</span></div></div><div class="post-content"> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/featured-images/img_container_networking.png" class="preview-img" alt="Preview Image"><p align="center"> <span class="caption" style="font-size: 14px; font-weight: 500; font-style: oblique;"> Container Networking Featured Photo </span></p><p>This article focused on a deep dive into Container networking; how to run Containers and configure Container Networking from scratch using the tools, such as <em>Linux Namespaces</em>, <em>chroot</em>, <em>unshare</em> and <em>ip</em>. This article also provides a hands-on practical guide on how to run and configure from scratch using these tools. You’ll mainly learn how Container Networking works at the underlying layer (or low level), and then you’ll clearly understand how Docker Container Networking works.</p><h2 id="summary-objectives">Summary: Objectives</h2><p><em>What you’ll learn in this article:</em></p><ul><li><p>Basic Concepts of Containerization.</p><li><p>Linux Namespaces, the foundation of modern Container technologies.</p><li><p>How Linux Namespaces work and How Containers isolate from the Host OS.</p><li><p>How Virtual Ethernet and Bridge networking work.</p><li><p>How Containers and Container Networking work at the underlying layer, also known as low level.</p></ul><h2 id="prerequisities">Prerequisities</h2><p>Before we begin, make sure you are familiar with the following tools:</p><ul><li><p>Linux Host (e.g., Ubuntu, Fedora, etc..)</p><li><p><a href="https://man7.org/linux/man-pages/man1/chroot.1.html">chroot</a> ─ <em>a user-space tool to interact with the <a href="https://man7.org/linux/man-pages/man2/chroot.2.html">chroot(2)</a> system call, to change the root filesystem of the calling process.</em></p><li><p><a href="https://man7.org/linux/man-pages/man1/unshare.1.html">unshare</a> ─ <em>a user-space tool to interact with <a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">Linux kernel namespaces</a> by invoking the <a href="https://man7.org/linux/man-pages/man2/unshare.2.html">unshare(2)</a> system call, to create a new process in a new namespace that isolates the process ID, mount, IPC, network, and so on.</em></p><li><p><a href="https://man7.org/linux/man-pages/man8/ip.8.html">ip</a> ─ <em>a command-line tool to configure network interfaces, routing, and tunnels.</em></p><li><p><a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">Linux namespaces</a> ─ <em>a feature of the Linux kernel that isolates and virtualizes system resources for a collection of processes.</em></p></ul><p>NOTE: If you have installed any Linux distribution, these tools are built-in tools and features.</p><h2 id="introduction-to-containers">Introduction to Containers</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/featured-images/img_docker_containers.png" alt="docker-containers" /> <em>Docker Containers vs Virtual Machines by Docker</em></p><p>Nowadays, containers are a popular topic, and most companies are using containers to build, ship and run application workloads in both development and production environments.</p><p>Basically, containers are a way to package and deploy applications in an isolated and portal environment and they provide a standardized way to bundle an application’s code, dependencies and configuration into a single unit that can be easily deployed on the server.</p><p>Containers use OS-level virtualization to create an isolated environment for running applications. OS-level virtualization is a technology that allows multiple isolated Operating Systems to run on the same hardware, also known as containerization. Containers share the Host OS’s kernel and hardware resources, such as CPU and memory that make resource efficiency.</p><p>Benefits of using Containers are:</p><ul><li><p><strong>Portability</strong>: Containers can be moved easily between different environments, such as development, QA, staging and production.</p><li><p><strong>Consistency</strong>: Containers ensure that the application and its dependencies are packaged into a single unit that can be deployed easily.</p><li><p><strong>Scalability</strong>: Containers can be scaled up or down easily on demand.</p><li><p><strong>Efficiency</strong>: Containers are lightweight and share the Host OS’s kernel and hardware resources that make more efficient to run applications.</p></ul><h2 id="setup-project-and-root-filesystem">Setup Project and Root Filesystem</h2><p>Firstly, we will build and run Containers from scratch using the <code class="language-plaintext highlighter-rouge">chroot</code> and <code class="language-plaintext highlighter-rouge">unshare</code> command-line tools to understand how Containers work.</p><p>Project Structure looks like:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre>${HOME}/containers
        ├── alpine-linux
        │   ├── bin
        │   ├── dev
        │   ├── etc
        │   ├── home
        │   ├── lib
        │   ├── media
        │   ├── mnt
        │   ├── opt
        │   ├── proc
        │   ├── root
        │   ├── run
        │   ├── sbin
        │   ├── srv
        │   ├── sys
        │   ├── tmp
        │   ├── usr
        │   └── var
        └── tiny-linux
            ├── bin
            ├── dev
            ├── proc
            ├── sbin
            ├── sys
            └── usr
</pre></table></code></div></div><p>Create a project directory named, <code class="language-plaintext highlighter-rouge">containers</code> and then, we will put the Linux root filesystems (Alpine Linux, Tiny Linux) into it.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> containers/alpine-linux
</pre></table></code></div></div><p>In this article, we will use the Alpine Linux Mini root filesystem. Go to the Alpine Linux official website <a href="https://alpinelinux.org/downloads">https://alpinelinux.org/downloads</a> and download the Alpine Linux Mini root filesystem.</p><p>Alpine Linux has supported the Alpine Mini root filesystem that is for containers and minimal chroots. That supports multiple system architectures, such as <strong>aarch64, armv7. riscv64, x86, x86_64</strong> and so on.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/screenshots/img_screenshot_alpine_mini_rootfs.png" alt="img-alpine-mini-rootfs" /></p><p>(Or)</p><p>Download with the <code class="language-plaintext highlighter-rouge">curl</code> command line tool. For example, <code class="language-plaintext highlighter-rouge">x86_64</code> architecture.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>curl <span class="nt">-LO</span> https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/x86_64/alpine-minirootfs-3.21.3-x86_64.tar.gz
</pre></table></code></div></div><p>Put the downloaded Alpine Linux Mini rootfs file under the <code class="language-plaintext highlighter-rouge">containers/alpine-linux</code> directory and then, extract the mini rootfs tar file.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xzvf</span> alpine-minirootfs-3.21.3-x86_64.tar.gz
</pre></table></code></div></div><p>Then, clean up the <code class="language-plaintext highlighter-rouge">alpine-minirootfs-3.21.3-x86_64.tar.gz</code> tar file.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">rm </span>alpine-minirootfs-3.20.2-x86_64.tar.gz
</pre></table></code></div></div><h2 id="chroot-basic-concept-of-containers">chroot: Basic Concept of Containers</h2><h3 id="introduction-to-chroot">Introduction to chroot</h3><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre>/ <span class="o">(</span>Host Root Filesystem<span class="o">)</span>
├── bin
├── dev
├── etc
├── home
│   └── zawzaw/
│        └── containers/
│            ├── alpine-linux/
│            │    ├── bin
│            │    ├── dev
│            │    ├── etc
│            │    ├── home
│            │    ├── lib
│            │    ├── proc
│            │    ├── sbin
│            │    └── var
│            └── tiny-linux/
│                 ├── bin
│                 ├── dev
│                 ├── init.sh
│                 ├── linuxrc -&gt; bin/busybox
│                 ├── proc
│                 ├── sbin
│                 ├── sys
│                 ├── sbin
│                 └── usr
├── proc
├── sbin
├── sys
├── usr
└── var
</pre></table></code></div></div><p><a href="https://man7.org/linux/man-pages/man2/chroot.2.html">chroot</a> (Change Root) is a <em>Basic Concept</em> of Containers. chroot is an operation that changes the apparent root directory for the current running process and its children on Unix and Unix-like operating systems. Historically, the chroot system call was introduced in Unix Seventh Edition (Version 7) in 1979.</p><p>The <code class="language-plaintext highlighter-rouge">chroot</code> user-space program (or cleint command-line tool) functionality relies on kernel support because it calls the system call <a href="https://man7.org/linux/man-pages/man2/chroot.2.html">chroot(2)</a> handled by the kernel. This means that while you can execute <code class="language-plaintext highlighter-rouge">chroot</code> in user space, its effects depend on kernel-level enforcement.</p><ul><li><code class="language-plaintext highlighter-rouge">chroot</code> is a user-space program (or) client command-line tool.<li>It calls the <a href="https://man7.org/linux/man-pages/man2/chroot.2.html">chroot(2)</a> system call, which is handled by the kernel.<li>It is commonly used for sandboxing processes (or) creating minimal environments for recovery and testing.<li>A process inside chroot still runs with the same privileges (it does not enhance security like containers do).</ul><h3 id="using-the-chroot-user-space-tool">Using the chroot User-space Tool</h3><p>On Linux, we can use the <code class="language-plaintext highlighter-rouge">chroot</code> client command-line tool, to interact with the <a href="https://man7.org/linux/man-pages/man2/chroot.2.html">chroot(2)</a> system call (a kernel API function call) to change the root directory for the current running process.</p><p>Go to the already created project directory <code class="language-plaintext highlighter-rouge">${HOME}/containers/alpine-linux</code> and run the <code class="language-plaintext highlighter-rouge">chroot</code> command.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$HOME</span>/containers/alpine-linux
<span class="nv">$ </span><span class="nb">sudo chroot</span> <span class="nb">.</span> /bin/sh
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>/ <span class="c"># ls -l</span>
total 0
drwxr-xr-x    1 1000     1000           858 Jul 22 14:34 bin
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 dev
drwxr-xr-x    1 1000     1000           540 Jul 22 14:34 etc
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 home
drwxr-xr-x    1 1000     1000           272 Jul 22 14:34 lib
drwxr-xr-x    1 1000     1000            28 Jul 22 14:34 media
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 mnt
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 opt
dr-xr-xr-x    1 1000     1000             0 Jul 22 14:34 proc
drwx------    1 1000     1000            24 Jul 30 04:26 root
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 run
drwxr-xr-x    1 1000     1000           790 Jul 22 14:34 sbin
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 srv
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 sys
drwxr-xr-x    1 1000     1000             0 Jul 22 14:34 tmp
drwxr-xr-x    1 1000     1000            40 Jul 22 14:34 usr
drwxr-xr-x    1 1000     1000            86 Jul 22 14:34 var
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>/ <span class="c"># cat /etc/os-release</span>
<span class="nv">NAME</span><span class="o">=</span><span class="s2">"Alpine Linux"</span>
<span class="nv">ID</span><span class="o">=</span>alpine
<span class="nv">VERSION_ID</span><span class="o">=</span>3.21.3
<span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">"Alpine Linux v3.21"</span>
<span class="nv">HOME_URL</span><span class="o">=</span><span class="s2">"https://alpinelinux.org/"</span>
<span class="nv">BUG_REPORT_URL</span><span class="o">=</span><span class="s2">"https://gitlab.alpinelinux.org/alpine/aports/-/issues"</span>
</pre></table></code></div></div><p>Then, you need to mount the <em>proc</em> virtual filesystem inside the chroot isolated environment.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>mount <span class="nt">-t</span> proc proc /proc
</pre></table></code></div></div><p>This <code class="language-plaintext highlighter-rouge">mount</code> command mounts the <a href="https://docs.kernel.org/filesystems/proc.html">/proc</a> Virtual Filesystem (VFS) to the <code class="language-plaintext highlighter-rouge">/proc</code> directory inside the chroot (or) container environment.</p><ul><li><code class="language-plaintext highlighter-rouge">mount</code>: This command to attach a filesystem to the directory tree.<li><code class="language-plaintext highlighter-rouge">-t proc</code>: Specifies the filesystem type as the <em>proc</em> virtual filesystem.<li><code class="language-plaintext highlighter-rouge">proc</code>: The source since <em>proc</em> is virtual, no physical device is used.<li><code class="language-plaintext highlighter-rouge">/proc</code>: The mount point where the filesystem will be attached in the chroot isolated root filesystem.</ul><p><strong>Why do we need to mount the /proc filesystem?</strong></p><p>Mounting the <em>/proc</em> filesystem inside the chroot environment is necessary because the <em>/proc</em> virtual filesystem is a critical component (or) feature that is information about the system and process provided by the Linux kernel to the user-space apps and tools. Without it, many user-space apps and tools (e.g; <code class="language-plaintext highlighter-rouge">ps</code>, <code class="language-plaintext highlighter-rouge">top</code>) that rely on <code class="language-plaintext highlighter-rouge">/proc</code> will not work properly.</p><p>For example, the <code class="language-plaintext highlighter-rouge">ps</code> tool will not work properly.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>ps aux
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="c"># Error: Could not read /proc/stat</span>
</pre></table></code></div></div><p>Read more details about the <em>/proc</em> virtual filesystem in <strong>the next section</strong>.</p><h3 id="the-proc-virtual-filesystem">The /proc Virtual Filesystem</h3><p>The <em>proc</em> filesystem (often referred to as <code class="language-plaintext highlighter-rouge">/proc</code>) is a <strong>Virtual Filesystem (VFS)</strong> also known as a Pseudo (or) Special Filesystem on Linux that provides a way to expose system and process information to users and user-space applications in a structured, file-like format by the Linux kernel.</p><p>That does not rely on physical storage devices, such as HDDs and SSDs. The files and directories in <code class="language-plaintext highlighter-rouge">/proc</code> are not stored on disk and exist only in memory, and are generated on-the-fly (or) exposed dynamically by the Linux kernel when the system is booted.</p><p>Key Features of the <em>/proc</em> Filesystem:</p><ul><li>(1) Virtual and Dynamic:<ul><li>The files and directories in <code class="language-plaintext highlighter-rouge">/proc</code> are generated dynamically by the Linux kernel.<li>The files and directories in <code class="language-plaintext highlighter-rouge">/proc</code> don’t exist on disk; they are created in memory when read.</ul><li>(2) System and Process Information:<ul><li>/proc provides the detailed information about:<ul><li>Running processes (e.g; <code class="language-plaintext highlighter-rouge">/proc/[PID]</code> for each process).<li>System hardware (e.g; CPU: <code class="language-plaintext highlighter-rouge">/proc/cpuinfo</code>, Memory: <code class="language-plaintext highlighter-rouge">cat /proc/meminfo</code>)<li>Kernel configuration and runtime parameters.</ul></ul><li>(3) Readable and Writable:<ul><li>Most files in <code class="language-plaintext highlighter-rouge">/proc</code> are readable (e.g; you can cat <code class="language-plaintext highlighter-rouge">/proc/cpuinfo</code>).<li>Some files are writable, allowing you to modify kernel parameters at runtime (e.g; <code class="language-plaintext highlighter-rouge">/proc/sys</code>).</ul></ul><p>After you run the <code class="language-plaintext highlighter-rouge">mount -t proc proc /proc</code> command inside the container, you can test the following commands.</p><ul><li><p><code class="language-plaintext highlighter-rouge">cat /etc/os-release</code>: To check the running container’s Linux distribution.</p><li><p><code class="language-plaintext highlighter-rouge">cat /proc/version</code>: To check the Linux kernel version that is shared from the Host OS.</p><li><p><code class="language-plaintext highlighter-rouge">cat /proc/cpuinfo</code>: To check the CPU information that is shared from the Host OS.</p><li><p><code class="language-plaintext highlighter-rouge">cat /proc/meminfo</code>: To check the Memory information that is shared from the Host OS.</p><li><p><code class="language-plaintext highlighter-rouge">ps aux</code>: To check all processes that are running inside the container.</p><li><p><code class="language-plaintext highlighter-rouge">ip addr show</code>: To see all IP addresses inside the currently running container.</p></ul><p>For example,</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>/ <span class="c"># cat /etc/os-release</span>
<span class="nv">NAME</span><span class="o">=</span><span class="s2">"Alpine Linux"</span>
<span class="nv">ID</span><span class="o">=</span>alpine
<span class="nv">VERSION_ID</span><span class="o">=</span>3.21.3
<span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">"Alpine Linux v3.21"</span>
<span class="nv">HOME_URL</span><span class="o">=</span><span class="s2">"https://alpinelinux.org/"</span>
<span class="nv">BUG_REPORT_URL</span><span class="o">=</span><span class="s2">"https://gitlab.alpinelinux.org/alpine/aports/-/issues"</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>/ <span class="c"># cat /proc/version</span>
Linux version 6.13.5-200.fc41.x86_64 <span class="o">(</span>mockbuild@be03da54f8364b379359fe70f52a8f23<span class="o">)</span> <span class="o">(</span>gcc <span class="o">(</span>GCC<span class="o">)</span> 14.2.1 20250110 <span class="o">(</span>Red Hat 14.2.1-7<span class="o">)</span>, GNU ld version 2.43.1-5.fc41<span class="o">)</span> <span class="c">#1 SMP PREEMPT_DYNAMIC Thu Feb 27 15:07:31 UTC 2025</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>/ <span class="c"># cat /proc/cpuinfo</span>
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 142
model name      : Intel<span class="o">(</span>R<span class="o">)</span> Core<span class="o">(</span>TM<span class="o">)</span> i7-8565U CPU @ 1.80GHz
stepping        : 12
microcode       : 0xfc
cpu MHz         : 2900.231
cache size      : 8192 KB
...
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>/ <span class="c"># cat /proc/meminfo</span>
MemTotal:       16210104 kB
MemFree:         3241444 kB
MemAvailable:    9901900 kB
Buffers:            5496 kB
Cached:          7888196 kB
...
</pre></table></code></div></div><p>Then, you will notice that <strong>the Alpine Linux container is using the Host OS kernel</strong>, Fedora Linux, with the kernel version <code class="language-plaintext highlighter-rouge">6.13.5-200.fc41.x86_64</code> that is shared from the Host OS. And also shared CPU and Memory from the Host machine.</p><p>Then, we wil test the currently running processes and IP addresses inside the container like this.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>/ <span class="c"># ps aux</span>
PID   USER     TIME  COMMAND
    1 root      0:05 /usr/lib/systemd/systemd <span class="nt">--switched-root</span> <span class="nt">--system</span> <span class="nt">--deserialize</span><span class="o">=</span>51 rhgb
    2 root      0:00 <span class="o">[</span>kthreadd]
    3 root      0:00 <span class="o">[</span>pool_workqueue_]
    4 root      0:00 <span class="o">[</span>kworker/R-rcu_g]
    5 root      0:00 <span class="o">[</span>kworker/R-sync_]
    6 root      0:00 <span class="o">[</span>kworker/R-slub_]
    7 root      0:00 <span class="o">[</span>kworker/R-netns]
    9 root      0:00 <span class="o">[</span>kworker/0:0H-ev]
   12 root      0:00 <span class="o">[</span>kworker/R-mm_pe]
   14 root      0:00 <span class="o">[</span>rcu_tasks_kthre]
   15 root      0:00 <span class="o">[</span>rcu_tasks_rude_]
   16 root      0:00 <span class="o">[</span>rcu_tasks_trace]
   17 root      0:16 <span class="o">[</span>ksoftirqd/0]
   18 root      0:10 <span class="o">[</span>rcu_preempt]
   19 root      0:00 <span class="o">[</span>rcu_exp_par_gp_]
   20 root      0:00 <span class="o">[</span>rcu_exp_gp_kthr]
...
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>/ <span class="c"># ip addr show</span>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute
       valid_lft forever preferred_lft forever
2: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP qlen 1000
    <span class="nb">link</span>/ether fa:8b:5b:09:59:51 brd ff:ff:ff:ff:ff:ff
    inet 192.168.55.127/24 brd 192.168.55.255 scope global dynamic noprefixroute wlo1
       valid_lft 75600sec preferred_lft 75600sec
    inet6 fe80::fa24:a316:4e60:c881/64 scope <span class="nb">link </span>noprefixroute
       valid_lft forever preferred_lft forever
...
</pre></table></code></div></div><p>In that time, you will notice that we will see all processes and network interfaces of the Host OS, Fedora Linux, from the chroot Alpine Linux container. It means that we have not isolated the process ID (PID) and network.</p><p>In <strong>the next section</strong>, we will learn how <a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">Linux namespaces</a> work and how to use the <a href="https://man7.org/linux/man-pages/man1/unshare.1.html">unshare</a> user-space client tool to interact with <em>Linux namespaces</em> to start a process in a namespace that isolates the process ID (PID), mount, IPC, network, and so on.</p><h2 id="linux-kernel-namespaces">Linux Kernel Namespaces</h2><h3 id="introduction-to-namespaces">Introduction to Namespaces</h3><p><a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">Namespaces</a> are a feature of the Linux kernel that isolates and virtualizes system resources for a collection of processes. Namespaces have been released in the Linux kernel version 2.4.19 since 2002.</p><p>Namespaces are the foundation of modern Containerization technologies, such as <em>Docker</em> and <em>Podman</em>. Namespaces enable multiple processes to have different views of the system, such as different process IDs, network interfaces, filesystems, and so on.</p><p>Documentation: <a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">https://man7.org/linux/man-pages/man7/namespaces.7.html</a></p><p>Types of Linux Namespaces:</p><div class="table-wrapper"><table><thead><tr><th>Namespace<th>Manual Page<th>Isolates<tbody><tr><td>PID (Process ID)<td><a href="https://man7.org/linux/man-pages/man7/pid_namespaces.7.html">pid_namespaces</a><td>Isolates process IDs.<tr><td>Mount<td><a href="https://man7.org/linux/man-pages/man7/mount_namespaces.7.html">mount_namespaces</a><td>Isolates the set of mounted filesystems.<tr><td>UTS (UNIX Timesharing System)<td><a href="https://man7.org/linux/man-pages/man7/uts_namespaces.7.html">uts_namespaces</a><td>Isolates hostname and DNS name.<tr><td>IPC (Inter-process Communication)<td><a href="https://man7.org/linux/man-pages/man7/ipc_namespaces.7.html">ipc_namespaces</a><td>Isolates IPC resources, such as message queue and shared memory.<tr><td>Network<td><a href="https://man7.org/linux/man-pages/man7/network_namespaces.7.html">network_namespaces</a><td>Isolates network interfaces, IP addresses, routing tables, and port numbers.<tr><td>User<td><a href="https://man7.org/linux/man-pages/man7/user_namespaces.7.html">user_namespaces</a><td>Isolates user and group IDs.<tr><td>CGroup<td><a href="https://man7.org/linux/man-pages/man7/cgroup_namespaces.7.html">cgroup_namespaces</a><td>Isolates the view of Control Groups (CGroups).</table></div><h3 id="how-linux-namespaces-work">How Linux Namespaces Work</h3><p>The Namespaces API supported the following system calls and Namespaces are created using these system calls.</p><ul><li><p><code class="language-plaintext highlighter-rouge">clone()</code> Creates a new process in a new namespace.</p><li><p><code class="language-plaintext highlighter-rouge">unshare()</code> Creates (or) moves the calling process to a new namespace.</p><li><p><code class="language-plaintext highlighter-rouge">setns()</code> Allows a process to join an existing namespace.</p></ul><p><strong>Example Use Cases</strong></p><p>Consider a Container running on a Linux Host machine:</p><ul><li><p><em>The container has its own Mount namespaces</em>, So it can have its own root filesystem that is isolated from the Host OS.</p><li><p><em>The container has its own UTS namespaces</em>, So it can have its own hostname that is isolated from the Host OS.</p><li><p><em>The container has its own PID namespaces</em>, So processes inside the container have its own PIDs that are isolated from the Host OS.</p><li><p><em>The container has its own Network namespaces</em>, So it can have its own IP addresses and network interfaces that are isolated from the Host OS.</p></ul><h3 id="using-the-unshare-user-space-tool">Using the unshare User-space Tool</h3><p>The <a href="https://man7.org/linux/man-pages/man1/unshare.1.html">unshare</a> command-line tool is a user-space tool to interact with <a href="https://man7.org/linux/man-pages/man7/namespaces.7.html">Linux kernel namespaces</a> by invoking the <a href="https://man7.org/linux/man-pages/man2/unshare.2.html">unshare(2)</a> system call, to create a new process in a new namespace (or) move a process into an existing namespace that isolates the process IDs, mount points, IPC, network interfaces, and so on.</p><p>The <code class="language-plaintext highlighter-rouge">unshare</code> CLI client tool creates new namespaces for the calling process and it can create one or more of the following namespaces.</p><ul><li>PID (Process ID)<li>Mount<li>UTS (Hostname and domain name)<li>IPC (Inter-process Communication)<li>Network<li>User<li>Cgroup</ul><p>Command Options:</p><ul><li><p><code class="language-plaintext highlighter-rouge">--mount</code>: Create a new mount namespace.</p><li><p><code class="language-plaintext highlighter-rouge">--uts</code>: Create a new UTS namespace (isolates hostname and domain name).</p><li><p><code class="language-plaintext highlighter-rouge">--ipc</code>: Create a new IPC namespace.</p><li><p><code class="language-plaintext highlighter-rouge">--net</code>: Create a new network namespace.</p><li><p><code class="language-plaintext highlighter-rouge">--pid</code>: Create a new PID namespace.</p><li><p><code class="language-plaintext highlighter-rouge">--user</code>: Create a new user namespace.</p><li><p><code class="language-plaintext highlighter-rouge">--cgroup</code>: Create a new cgroup namespace.</p><li><p><code class="language-plaintext highlighter-rouge">--fork</code>: Fork a new process to run the command (required for PID namespaces).</p></ul><p>Go to the project directory,</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd </span>containers/alpine-linux
</pre></table></code></div></div><p>Then, we will create a process, <em>the Alpine Linux</em> container, in PID (Process ID), Mount and Network namespaces using the <code class="language-plaintext highlighter-rouge">unshare</code> and <code class="language-plaintext highlighter-rouge">chroot</code> CLI tools.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>unshare <span class="nt">--pid</span> <span class="nt">--mount</span> <span class="nt">--net</span> <span class="nt">-f</span> <span class="nb">chroot </span>alpine-linux /bin/sh
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre>/ <span class="c"># ls -l</span>
total 4
drwxr-xr-x    1 1000     1000           858 Feb 13 23:04 bin
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 dev
drwxr-xr-x    1 1000     1000           540 Feb 13 23:04 etc
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 home
drwxr-xr-x    1 1000     1000           146 Feb 13 23:04 lib
drwxr-xr-x    1 1000     1000            28 Feb 13 23:04 media
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 mnt
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 opt
dr-xr-xr-x    1 1000     1000             0 Feb 13 23:04 proc
drwx------    1 1000     1000            24 Mar 12 09:10 root
drwxr-xr-x    1 1000     1000             8 Feb 13 23:04 run
drwxr-xr-x    1 1000     1000           790 Feb 13 23:04 sbin
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 srv
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 sys
drwxr-xr-x    1 1000     1000             0 Feb 13 23:04 tmp
drwxr-xr-x    1 1000     1000            40 Feb 13 23:04 usr
drwxr-xr-x    1 1000     1000            86 Feb 13 23:04 var
</pre></table></code></div></div><p>Then, mount the <code class="language-plaintext highlighter-rouge">/proc</code> virtual filesystem to see the system and process information.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>mount <span class="nt">-t</span> proc proc /proc
</pre></table></code></div></div><p>Then, check running processes and network interfaces on the Alpine Linux container.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>/ <span class="c"># ps aux</span>
PID   USER     TIME  COMMAND
    1 root      0:00 /bin/sh
    5 root      0:00 ps aux
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>/ <span class="c"># ip addr show</span>
1: lo: &lt;LOOPBACK&gt; mtu 65536 qdisc noop state DOWN qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</pre></table></code></div></div><p>Now, you will see the Alpine Linux container with an isolated environment (<strong>PID</strong> and <strong>Network</strong>). That’s fully isolated from the Host machine.</p><h2 id="container-networking-from-scratch">Container Networking from Scratch</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/featured-images/img_container_networking_diagram.png" alt="container-networking" /></p><p>In this section, we will configure Container networking from scratch, and learn how its networking works and how Containers communicate at the networking layer.</p><h3 id="overview-of-virtual-ethernet-and-bridge-networking">Overview of Virtual Ethernet and Bridge Networking</h3><p><strong>Virtual Ethernet (VETH)</strong> and <strong>Bridge Networking</strong> are key components of Linux virtual networking that enable communication between Containers and the Host Linux system. They are widely used in Containerization technologies, such as Docker and Kubernetes.</p><h4 id="virtual-ethernet-veth">Virtual Ethernet (VETH)</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://developers.redhat.com/sites/default/files/blog/2018/10/veth.png" alt="veth" /> <em>Photo Credit: Virtual Ethernet (VETH) by Red Hat Developers</em></p><p><em>Virtual Ethernet (VETH)</em> is a pair of virtual network interfaces that act like a pipe: whatever is sent in one end is received by the other. They are commonly used to connect Network namespaces to the Host machine or other Network namespaces.</p><ul><li><p>A veth pair consists of two interfaces: one in the host machine’s Network namespace and one in the container’s Network namespace.</p><li><p>Packets sent through one interface are received by the other.</p><li><p>This allows communication between the container and the host or other containers.</p></ul><h4 id="bridge-networking">Bridge Networking</h4><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://developers.redhat.com/sites/default/files/blog/2018/10/bridge.png" alt="bridge-network" /> <em>Photo Credit: Bridge Networking by Red Hat Developers</em></p><p><em>Bridge Network</em> is a virtual network switch that connects multiple Network interfaces together. It allows Containers to communicate with each other.</p><ul><li><p>A bridge acts as a Layer 2 device, forwarding Ethernet frames between connected interfaces.</p><li><p>Containers or virtual machines are connected to the bridge via VETH pairs.</p><li><p>The bridge can be connected to the host’s physical network interface to provide external connectivity.</p></ul><p>Reference <a href="https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking">https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking</a></p><h3 id="a-alpine-linux-container-setting-up-veth-network">(A) Alpine Linux Container: Setting up VETH Network</h3><p>In this section, we will setup the VETH network on the Alpine Linux container.</p><p>Same as previous, we will create a process, <em>the Alpine Linux container</em>, in isolated PID (Process ID), Mount, and Network namespaces using the command-line tools, <code class="language-plaintext highlighter-rouge">unshare</code>, <code class="language-plaintext highlighter-rouge">chroot</code>.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/containers/alpine-linux
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>unshare <span class="nt">--pid</span> <span class="nt">--mount</span> <span class="nt">--net</span> <span class="se">\</span>
  <span class="nt">-f</span> <span class="nb">chroot</span> <span class="nb">.</span> <span class="se">\</span>
  <span class="nb">env</span> <span class="nt">-i</span> <span class="se">\</span>
    <span class="nv">HOME</span><span class="o">=</span>/root <span class="se">\</span>
    <span class="nv">HOSTNAME</span><span class="o">=</span>alpine-linux <span class="se">\</span>
  /bin/sh
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>mount <span class="nt">-t</span> proc proc /proc
</pre></table></code></div></div><p>Then, get the container’s PID from your <strong>Host Linux machine</strong>. The Alpine Linux container’s PID is <code class="language-plaintext highlighter-rouge">25473</code>.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>zawzaw@fedora-linux:~]<span class="nv">$ </span>ps <span class="nt">-C</span> sh
    PID TTY          TIME CMD
  25473 pts/6    00:00:00 sh
</pre></table></code></div></div><p>Then, set the <code class="language-plaintext highlighter-rouge">ALPINE_CONTAINER_PID</code> environment variable with the <code class="language-plaintext highlighter-rouge">export</code> command. This PID is required to set when creating the VETH network.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">ALPINE_CONTAINER_PID</span><span class="o">=</span>25473
</pre></table></code></div></div><p>On the <strong>Host Linux machine</strong>, setup a veth network pair, <code class="language-plaintext highlighter-rouge">veth0</code>, <code class="language-plaintext highlighter-rouge">veth1</code> with the <code class="language-plaintext highlighter-rouge">ip</code> command-line tool.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>veth1 netns <span class="s2">"</span><span class="k">${</span><span class="nv">ALPINE_CONTAINER_PID</span><span class="k">}</span><span class="s2">"</span>
<span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>dev veth0 up
<span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span>ip addr show veth0
</pre></table></code></div></div><p>On the <strong>Alpine Linux container</strong> and set an IP address <code class="language-plaintext highlighter-rouge">172.19.35.3</code> to the <code class="language-plaintext highlighter-rouge">veth1</code> network device and bring up.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>/ <span class="c"># ip addr add dev veth1 172.19.35.3/24</span>
/ <span class="c"># ip link set lo up</span>
/ <span class="c"># ip link set veth1 up</span>
</pre></table></code></div></div><hr /><p>On the <strong>Host Linux machine</strong>, check the Network interfaces and IP addresses:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span>ip addr show veth0
11: veth0@if10: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    <span class="nb">link</span>/ether c6:23:c1:27:62:a8 brd ff:ff:ff:ff:ff:ff link-netnsid 1
    inet6 fe80::c423:c1ff:fe27:62a8/64 scope <span class="nb">link </span>proto kernel_ll
       valid_lft forever preferred_lft forever
</pre></table></code></div></div><p>On the <strong>Alpine Linux container</strong>, check the Network interfaces and IP addresses.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>/ <span class="c"># ip addr show</span>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
10: veth1@if11: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue state UP qlen 1000
    <span class="nb">link</span>/ether 1e:c9:8c:80:fd:9a brd ff:ff:ff:ff:ff:ff
    inet 172.19.35.3/24 scope global veth1
       valid_lft forever preferred_lft forever
    inet6 fe80::1cc9:8cff:fe80:fd9a/64 scope <span class="nb">link
       </span>valid_lft forever preferred_lft forever
</pre></table></code></div></div><p>Now, you will see the VETH interfaces, <code class="language-plaintext highlighter-rouge">veth0</code>, <code class="language-plaintext highlighter-rouge">veth1</code> are up and set its IP address to <code class="language-plaintext highlighter-rouge">172.19.35.3</code>.</p><h3 id="b-tiny-linux-container-setting-up-veth-network">(B) Tiny Linux Container: Setting up VETH Network</h3><p>For Container (B), we will use the <em>Tiny Linux</em> root filesystem image that I’ve compiled from the Linux kernel source code with busybox. Read more on <a href="https://gist.github.com/zawzaww/cfedae575c7f9fc83ea3a02105dc263e">Building a minimal Linux system from Scratch and Booting in QEMU Emulator</a>.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~/containers/tiny-linux]<span class="nv">$ </span>tree
<span class="nb">.</span>
├── bin
├── dev
├── linuxrc -&gt; bin/busybox
├── proc
├── sbin
├── sys
└── usr
</pre></table></code></div></div><p>Download: <a href="https://drive.google.com/file/d/1suciSI1GHOuUs4j6CXU6VYZmt0ESEVC1/view?usp=sharing">Tiny Linux Root Filesystem</a></p><p>In this section, we will setup the VETH network on the Tiny Linux container. Same as previous, we will create a process, <strong>Container (B)</strong> also known as the <strong>Tiny Linux container</strong>, in isolated PID (Process ID), Mount, and Network namespaces using the command-line tools, <code class="language-plaintext highlighter-rouge">unshare</code>, <code class="language-plaintext highlighter-rouge">chroot</code>.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/cd containers/tiny-linux
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">sudo </span>unshare <span class="nt">--pid</span> <span class="nt">--mount</span> <span class="nt">--net</span> <span class="se">\</span>
  <span class="nt">-f</span> <span class="nb">chroot</span> <span class="nb">.</span> <span class="se">\</span>
  <span class="nb">env</span> <span class="nt">-i</span> <span class="se">\</span>
    <span class="nv">HOME</span><span class="o">=</span>/root <span class="se">\</span>
    <span class="nv">HOSTNAME</span><span class="o">=</span>tiny-linux <span class="se">\</span>
  /bin/sh
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>mount <span class="nt">-t</span> proc proc /proc
</pre></table></code></div></div><p>Then, get the container’s PID from your <strong>Host Linux machine</strong>. The Tiny Linux container’s PID is <code class="language-plaintext highlighter-rouge">29999</code>.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span>ps <span class="nt">-C</span> sh
    PID TTY          TIME CMD
  25473 pts/6    00:00:00 sh
  29999 pts/9    00:00:00 sh
</pre></table></code></div></div><p>Then, set the <code class="language-plaintext highlighter-rouge">TINY_CONTAINER_PID</code> environment variable with the <code class="language-plaintext highlighter-rouge">export</code> command. This PID is required to set when creating the VETH network.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">TINY_CONTAINER_PID</span><span class="o">=</span>29999
</pre></table></code></div></div><p>On the <strong>Host Linux machine</strong>, setup a veth network pair, <code class="language-plaintext highlighter-rouge">veth2</code>, <code class="language-plaintext highlighter-rouge">veth3</code> with the <code class="language-plaintext highlighter-rouge">ip</code> command-line tool.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link </span>add veth2 <span class="nb">type </span>veth peer name veth3
<span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>veth3 netns <span class="s2">"</span><span class="k">${</span><span class="nv">TINY_CONTAINER_PID</span><span class="k">}</span><span class="s2">"</span>
<span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>dev veth2 up
</pre></table></code></div></div><p>On the <strong>Container (B), Tiny Linux container</strong> and set an IP address <code class="language-plaintext highlighter-rouge">172.19.35.2</code> to the <code class="language-plaintext highlighter-rouge">veth3</code> network device and bring up.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>/ <span class="c"># ip addr add dev veth3 172.19.35.2/24</span>
/ <span class="c"># ip link set lo up</span>
/ <span class="c"># ip link set veth3 up</span>
</pre></table></code></div></div><hr /><p>On the <strong>Host Linux machine</strong>, check the Network interfaces and IP addresses.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>13: veth2@if12: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    <span class="nb">link</span>/ether 06:97:e6:1f:d4:b3 brd ff:ff:ff:ff:ff:ff link-netnsid 2
    inet6 fe80::497:e6ff:fe1f:d4b3/64 scope <span class="nb">link </span>proto kernel_ll
       valid_lft forever preferred_lft forever
</pre></table></code></div></div><p>On the <strong>Container (B), Tiny Linux container</strong>, check the Network interfaces and IP addresses.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
12: veth3@if13: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue qlen 1000
    <span class="nb">link</span>/ether 72:37:8b:a8:26:7e brd ff:ff:ff:ff:ff:ff
    inet 172.19.35.2/24 scope global veth3
       valid_lft forever preferred_lft forever
    inet6 fe80::7037:8bff:fea8:267e/64 scope <span class="nb">link
       </span>valid_lft forever preferred_lft forever
</pre></table></code></div></div><p>Now, you will see the VETH network interfaces, <code class="language-plaintext highlighter-rouge">veth2</code>, <code class="language-plaintext highlighter-rouge">veth3</code> are up and set its IP address to <code class="language-plaintext highlighter-rouge">172.19.35.2</code>.</p><p>But now, you will notice that Containers can’t communicate with each other. To confirm this, you can test by running the <code class="language-plaintext highlighter-rouge">ping</code> command.</p><ul><li><em>(A) Alpine Linux Container’s IP address:</em> <code class="language-plaintext highlighter-rouge">172.19.35.3</code><li>(B) <em>Tiny Linux Container’s IP address:</em> <code class="language-plaintext highlighter-rouge">172.19.35.2</code></ul><p>For example, ping <code class="language-plaintext highlighter-rouge">172.19.35.3</code> from the <strong>Tiny Linux</strong> container. It will not work and is not reachable network from one to another one because we need to setup a Bridge network.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>/ <span class="c"># ping -c 5 172.19.35.3</span>
PING 172.19.35.3 <span class="o">(</span>172.19.35.3<span class="o">)</span>: 56 data bytes

<span class="nt">---</span> 172.19.35.3 ping statistics <span class="nt">---</span>
5 packets transmitted, 0 packets received, 100% packet loss
</pre></table></code></div></div><p>In <strong>the next section</strong>, you’ll learn how to setup a Bridge network to forward the network packets between two containers.</p><h3 id="setting-up-bridge-network">Setting Up Bridge Network</h3><p>We now have two containers, <strong>Alpine Linux</strong> and <strong>Tiny Linux</strong>, running in fully isolated <em>PID</em>, <em>Mount</em> and <em>Network</em> Linux namesapces. They also have the Virtual Enthernet (VETH) pair in the same <em>Network</em> Linux namespace.</p><p>In this section, we will continue to setup a <em>Bridge network</em> to forward the network packets to the <em>Two Containers</em>.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/featured-images/img_bridge_network.png" alt="bridge-network" /></p><p>On <strong>the Host Linux machine</strong>, setup a Bridge network and attach it to the <code class="language-plaintext highlighter-rouge">veth0</code> and <code class="language-plaintext highlighter-rouge">veth2</code> network interfaces.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>veth0 master br0
<span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>veth2 master br0
<span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip addr add dev br0 172.19.35.1/24
</pre></table></code></div></div><p>Then, set an IP address <code class="language-plaintext highlighter-rouge">172.19.35.1</code> to the <code class="language-plaintext highlighter-rouge">br0</code> network interface.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span><span class="nb">sudo </span>ip <span class="nb">link set </span>br0 up
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="o">[</span>zawzaw@fedora-linux:~]<span class="nv">$ </span>ip addr show br0
14: br0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    <span class="nb">link</span>/ether 06:97:e6:1f:d4:b3 brd ff:ff:ff:ff:ff:ff
    inet 172.19.35.1/24 scope global br0
       valid_lft forever preferred_lft forever
    inet6 fe80::497:e6ff:fe1f:d4b3/64 scope <span class="nb">link </span>proto kernel_ll
       valid_lft forever preferred_lft forever
</pre></table></code></div></div><p>Then, you can test network reachability between Two Containers by running the <code class="language-plaintext highlighter-rouge">ping</code> command-line tool.</p><p>For example, <code class="language-plaintext highlighter-rouge">ping 172.19.35.3</code> from the <em>Tiny Linux</em> container.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>/ <span class="c"># ping -c 5 172.19.35.3</span>
PING 172.19.35.3 <span class="o">(</span>172.19.35.3<span class="o">)</span>: 56 data bytes
64 bytes from 172.19.35.3: <span class="nb">seq</span><span class="o">=</span>0 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.070 ms
64 bytes from 172.19.35.3: <span class="nb">seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.041 ms
64 bytes from 172.19.35.3: <span class="nb">seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.059 ms
64 bytes from 172.19.35.3: <span class="nb">seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.072 ms
64 bytes from 172.19.35.3: <span class="nb">seq</span><span class="o">=</span>4 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.050 ms

<span class="nt">---</span> 172.19.35.3 ping statistics <span class="nt">---</span>
5 packets transmitted, 5 packets received, 0% packet loss
</pre></table></code></div></div><p>For example, <code class="language-plaintext highlighter-rouge">ping 172.19.35.2</code> from the <em>Alpine Linux</em> container.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>/ <span class="c"># ping -c 5 172.19.35.2</span>
PING 172.19.35.2 <span class="o">(</span>172.19.35.2<span class="o">)</span>: 56 data bytes
64 bytes from 172.19.35.2: <span class="nb">seq</span><span class="o">=</span>0 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.051 ms
64 bytes from 172.19.35.2: <span class="nb">seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.105 ms
64 bytes from 172.19.35.2: <span class="nb">seq</span><span class="o">=</span>2 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.042 ms
64 bytes from 172.19.35.2: <span class="nb">seq</span><span class="o">=</span>3 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.053 ms
64 bytes from 172.19.35.2: <span class="nb">seq</span><span class="o">=</span>4 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.052 ms

<span class="nt">---</span> 172.19.35.2 ping statistics <span class="nt">---</span>
5 packets transmitted, 5 packets received, 0% packet loss
</pre></table></code></div></div><p>Now, we can confirm that <em>Two Containers</em> can communicate with each others and work properly.</p><p>Reference Links:</p><ul><li><a href="https://blog.mbrt.dev/posts/container-network">https://blog.mbrt.dev/posts/container-network</a><li><a href="https://labs.iximiuz.com/tutorials/container-networking-from-scratch">https://labs.iximiuz.com/tutorials/container-networking-from-scratch</a><li><a href="https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking">https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/containerization/'>Containerization</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/containerization/" class="post-tag no-text-decoration" >containerization</a> <a href="/tags/containers/" class="post-tag no-text-decoration" >containers</a> <a href="/tags/networking/" class="post-tag no-text-decoration" >networking</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Containers from Scratch: Deep Dive into Single-Host Container Networking - Zaw Zaw&url=https://zawzaw.blog/posts/deep-dive-single-host-container-net/" data-toggle="tooltip" data-placement="top" title="X (Twitter)" target="_blank" rel="noopener" aria-label="X (Twitter)"> <i class="fa-fw fab fa-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Containers from Scratch: Deep Dive into Single-Host Container Networking - Zaw Zaw&u=https://zawzaw.blog/posts/deep-dive-single-host-container-net/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://zawzaw.blog/posts/deep-dive-single-host-container-net/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2" style="font-size: large;">Table of Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Related Posts</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/deep-dive-multi-host-container-net/"><div class="card-body"> <span class="timeago small" > May 25 <i class="unloaded">2025-05-25T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)</h3><div class="text-muted small"><p> This article is Part II of the previously published article, Containers from Scratch: Deep Dive into Single-Host Container Networking. In Part I, you’ve learned how two containers communicate on th...</p></div></div></a></div><div class="card"> <a href="/posts/guide-k8s-persistent-storage/"><div class="card-body"> <span class="timeago small" > Jan 31 <i class="unloaded">2025-01-31T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>A Hands-on Practical Guide to K8s Persistent Storage</h3><div class="text-muted small"><p> In Kubernetes, we typically need to create and use Persistent Volumes for stateful applications such as database servers, cache store servers, and so on. In this article, I will share how storage p...</p></div></div></a></div><div class="card"> <a href="/posts/configure-k8s-auth-rbac/"><div class="card-body"> <span class="timeago small" > Dec 5, 2024 <i class="unloaded">2024-12-05T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Configuring RBAC Role Bindings for a User on Kubernetes</h3><div class="text-muted small"><p> This article focuses on how to create a user and configure cluster roles and role bindings for that user using Kubernetes built-in RBAC authorization features. Basically, in Kubernetes, we can use ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/guide-k8s-persistent-storage/" class="btn btn-outline-primary" prompt="Older"><p>A Hands-on Practical Guide to K8s Persistent Storage</p></a> <a href="/posts/deep-dive-multi-host-container-net/" class="btn btn-outline-primary" prompt="Newer"><p>Containers from Scratch: Deep Dive into Multi-Host Container Networking (Part II)</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025, <a href="https://github.com/zawzaww">Zaw Zaw</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) by the author.">Licensed under CC BY 4.0.</span></p></div><div class="footer-right"><p class="mb-0"> <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">CHIRPY Theme</a> &mdash; <a href="https://jekyllrb.com" target="_blank" rel="noopener"> Powered byJekyll</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kernel/">kernel</a> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/aosp/">aosp</a> <a class="post-tag" href="/tags/build/">build</a> <a class="post-tag" href="/tags/containerization/">containerization</a> <a class="post-tag" href="/tags/containers/">containers</a> <a class="post-tag" href="/tags/networking/">networking</a> <a class="post-tag" href="/tags/asia/">asia</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zawzaw.blog{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
