<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Configuring RBAC Role Bindings for a User on Kubernetes" /><meta property="og:locale" content="en_US" /><meta name="description" content="This article focuses on how to create a user and configure cluster roles and role bindings for that user using Kubernetes built-in RBAC authorization features. Basically, in Kubernetes, we can use the service account as a user, but it is like a non-human user." /><meta property="og:description" content="This article focuses on how to create a user and configure cluster roles and role bindings for that user using Kubernetes built-in RBAC authorization features. Basically, in Kubernetes, we can use the service account as a user, but it is like a non-human user." /><link rel="canonical" href="https://zawzaw.blog/posts/configure-k8s-auth-rbac/" /><meta property="og:url" content="https://zawzaw.blog/posts/configure-k8s-auth-rbac/" /><meta property="og:site_name" content="Zaw Zaw" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-12-05T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Configuring RBAC Role Bindings for a User on Kubernetes" /><meta name="twitter:site" content="@zawzaw_me" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-01T03:17:40+00:00","datePublished":"2024-12-05T00:00:00+00:00","description":"This article focuses on how to create a user and configure cluster roles and role bindings for that user using Kubernetes built-in RBAC authorization features. Basically, in Kubernetes, we can use the service account as a user, but it is like a non-human user.","headline":"Configuring RBAC Role Bindings for a User on Kubernetes","mainEntityOfPage":{"@type":"WebPage","@id":"https://zawzaw.blog/posts/configure-k8s-auth-rbac/"},"url":"https://zawzaw.blog/posts/configure-k8s-auth-rbac/"}</script><title> Configuring RBAC Role Bindings for a User on Kubernetes | Zaw Zaw</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/images/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/images/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Zaw Zaw"><meta name="application-name" content="Zaw Zaw"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/images/favicons/favicon-16x16.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Zaw Zaw</a></div><div class="site-subtitle font-italic">ZAW's Library & Personal Blog</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/photography/" class="nav-link"> <i class="fa-fw fas fa-image ml-xl-3 mr-xl-3 unloaded"></i> <span>PHOTOGRAPHY</span> </a><li class="nav-item"> <a href="/contact/" class="nav-link"> <i class="fa-fw fas fa-phone ml-xl-3 mr-xl-3 unloaded"></i> <span>CONTACT</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/zawzaww" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://x.com/zawzaw_me" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-x-twitter"></i> </a> <a href="https://www.linkedin.com/in/zawzaww" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.instagram.com/zawzaw.me" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zawzthein','outlook.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Configuring RBAC Role Bindings for a User on Kubernetes</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Configuring RBAC Role Bindings for a User on Kubernetes</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Configuring RBAC Role Bindings for a User on Kubernetes</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Zaw Zaw </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 5, 2024, 12:00 AM +0000" prep="on" > Dec 5, 2024 <i class="unloaded">2024-12-05T00:00:00+00:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jun 1, 2025, 11:17 AM +0800" prefix="Updated " > Jun 1 <i class="unloaded">2025-06-01T03:17:40+00:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2522 words">14 min</span></div></div><div class="post-content"><p>This article focuses on how to create a user and configure cluster roles and role bindings for that user using Kubernetes built-in RBAC authorization features. Basically, in Kubernetes, we can use the service account as a user, but it is like a non-human user.</p><p>Generally, every Kubernetes cluster has the default admin <em>kubeconfig</em> file. We usually use this admin <em>kubeconfig</em> file to log in to, access, and manage the Kubernetes cluster. We can generate a service account token and assign this service account or user to a specific cluster role, and then configure the <em>kubeconfig</em> file with its token and give access to the user.</p><p>Then, a user or developer can log in to and access the Kubernetes cluster with the token or kubeconfig file using the <a href="https://github.com/kubernetes/dashboard">Kubernetes Dashboard</a> (or) the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux">kubectl</a> command-line tool.</p><h2 id="use-case">Use Case</h2><blockquote><p>Working with the team and want to give access to a user or developer with specific permissions on the Kubernetes cluster. For example, if you want to give access to a user with read-only access permissions.</p></blockquote><h2 id="summary-objectives">Summary: Objectives</h2><p><em>What you’ll learn in this article:</em></p><ul><li><p>Explore built-in RBAC authorization features on Kubernetes.</p><li><p>How to configure a service account, cluster roles and role bindings.</p><li><p>Learn a deep dive into RBAC verbs and how to grant permissions to a user.</p><li><p>How to generate a service account token for the user and use it in the <em>kubeconfig</em> file to access the Kubernetes cluster.</p></ul><h2 id="before-we-begin">Before We Begin</h2><p>Make sure you have installed the following tools.</p><ul><li>Kubernetes Cluster<li>The <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux">kubectl</a> command-line tool (or) <a href="https://github.com/kubernetes/dashboard">Kubernetes Dashboard</a></ul><h2 id="creating-a-user-with-rbac-bindings">Creating a User with RBAC Bindings</h2><p>In this article, we will demonstrate how to create a service account, <em>charlie</em> with <strong>engineer</strong> role that has read-only permissions to access all resources on the Kubernetes cluster, except from Secrets resources.</p><p>Create a YAML file named <code class="language-plaintext highlighter-rouge">k8s-user-charlie.yaml</code> that includes and configures <em>ServiceAccount</em>, <em>ClusterRole</em>, and <em>ClusterRoleBinding</em> resources.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">charlie</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">engineer</span>
<span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">configmaps</span>
      <span class="pi">-</span> <span class="s">endpoints</span>
      <span class="pi">-</span> <span class="s">persistentvolumeclaims</span>
      <span class="pi">-</span> <span class="s">pods</span>
      <span class="pi">-</span> <span class="s">replicationcontrollers</span>
      <span class="pi">-</span> <span class="s">replicationcontrollers/scale</span>
      <span class="pi">-</span> <span class="s">services</span>
      <span class="pi">-</span> <span class="s">nodes</span>
      <span class="pi">-</span> <span class="s">persistentvolumeclaims</span>
      <span class="pi">-</span> <span class="s">persistentvolumes</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">bindings</span>
      <span class="pi">-</span> <span class="s">events</span>
      <span class="pi">-</span> <span class="s">limitranges</span>
      <span class="pi">-</span> <span class="s">namespaces/status</span>
      <span class="pi">-</span> <span class="s">pods/log</span>
      <span class="pi">-</span> <span class="s">pods/status</span>
      <span class="pi">-</span> <span class="s">replicationcontrollers/status</span>
      <span class="pi">-</span> <span class="s">resourcequotas</span>
      <span class="pi">-</span> <span class="s">resourcequotas/status</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">namespaces</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">apps</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">daemonsets</span>
      <span class="pi">-</span> <span class="s">deployments</span>
      <span class="pi">-</span> <span class="s">deployments/scale</span>
      <span class="pi">-</span> <span class="s">replicasets</span>
      <span class="pi">-</span> <span class="s">replicasets/scale</span>
      <span class="pi">-</span> <span class="s">statefulsets</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">autoscaling</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">horizontalpodautoscalers</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">batch</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">cronjobs</span>
      <span class="pi">-</span> <span class="s">jobs</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">extensions</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">daemonsets</span>
      <span class="pi">-</span> <span class="s">deployments</span>
      <span class="pi">-</span> <span class="s">deployments/scale</span>
      <span class="pi">-</span> <span class="s">ingresses</span>
      <span class="pi">-</span> <span class="s">networkpolicies</span>
      <span class="pi">-</span> <span class="s">replicasets</span>
      <span class="pi">-</span> <span class="s">replicasets/scale</span>
      <span class="pi">-</span> <span class="s">replicationcontrollers/scale</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">policy</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">poddisruptionbudgets</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">networking.k8s.io</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">networkpolicies</span>
      <span class="pi">-</span> <span class="s">ingresses</span>
  <span class="pi">-</span> <span class="na">verbs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">get</span>
      <span class="pi">-</span> <span class="s">list</span>
      <span class="pi">-</span> <span class="s">watch</span>
    <span class="na">apiGroups</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">storage.k8s.io</span>
    <span class="na">resources</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">storageclasses</span>
      <span class="pi">-</span> <span class="s">volumeattachments</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">rolebinding-charlie</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">engineer</span>
<span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">charlie</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
</pre></table></code></div></div><p>After configuring RBAC bindings in the <code class="language-plaintext highlighter-rouge">k8s-user-charlie.yaml</code> YAML file, deploy it with the <code class="language-plaintext highlighter-rouge">kubectl</code> command-line tool on the Kubernetes cluster.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubect apply <span class="nt">-f</span> k8s-user-charlie.yaml
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>serviceaccount/charlie created
clusterrole.rbac.authorization.k8s.io/engineer created
clusterrolebinding.rbac.authorization.k8s.io/rolebinding-charlie created
</pre></table></code></div></div><p>In the above RBAC configuration, the <em>engineer</em> <code class="language-plaintext highlighter-rouge">ClusterRole</code> specifies a set of permissions to access all resources of Kubernetes, except from Secrets, and then the <code class="language-plaintext highlighter-rouge">ClusterRoleBinding</code> assigned a <code class="language-plaintext highlighter-rouge">ServiceAccount</code> user <em>charlie</em> to the <em>engineer</em> role.</p><p>Learn more about the detailed information on the RBAC configuration in the next section.</p><h2 id="understanding-the-rbac-configuration">Understanding the RBAC Configuration</h2><p><code class="language-plaintext highlighter-rouge">ServiceAccount</code> Creates a user for login and access the Kubernetes cluster.</p><p><code class="language-plaintext highlighter-rouge">ClusterRole</code> Specifies rules that represent a set of permissions.</p><ul><li><p><code class="language-plaintext highlighter-rouge">verbs</code> Specifies permissions to access Kubernetes resources. For example, <em>get</em>, <em>list</em>, <em>watch</em>, <em>patch</em> and etc..</p><ul><li><p><code class="language-plaintext highlighter-rouge">get</code> - Read individual resources or objects, like viewing pod details.</p><li><p><code class="language-plaintext highlighter-rouge">list</code> - List multiple resources of a certain type, like listing all pods in a namespace.</p><li><p><code class="language-plaintext highlighter-rouge">watch</code> - Observe resources for real-time updates, often used by controllers to track changes. For example, <em>kubectl get configmap –watch.</em></p><li><p><code class="language-plaintext highlighter-rouge">create</code> - Create a new resource or object, like creating a new pod or deployment or service. For example, <em>kubectl apply -f deployment.yaml.</em></p><li><p><code class="language-plaintext highlighter-rouge">delete</code> - Remove individual resources, like deleting a specific pod.</p><li><p><code class="language-plaintext highlighter-rouge">update</code> - Update the entire object. An update operation replaces the entire resource specification. It overwrites the existing object with the new specification. For example, <em>kubectl apply -f deployment.yaml.</em></p><li><p><code class="language-plaintext highlighter-rouge">patch</code> - Apply a partial update to a resource. A patch operation modifies specific fields selectively without affecting the rest of the object.</p><p>For example, <code class="language-plaintext highlighter-rouge">kubectl patch deployment nginx-server -p '{"spec": {"template": {"spec": {"containers": [{"name": "nginx", "image": "nginx:v2"}]}}}}')</code></p></ul><li><p><code class="language-plaintext highlighter-rouge">apiGroups</code> Specifies Kubernetes API groups. For example, <em>Deployment</em> is included in the <em>apps</em> API group.</p><p>To get Kubernetes API groups, run the <code class="language-plaintext highlighter-rouge">kubectl api-resources</code> command. Check the <code class="language-plaintext highlighter-rouge">APIVERSION</code> column and format is <code class="language-plaintext highlighter-rouge">&lt;api-group/version&gt;</code>.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre> <span class="nv">$ </span>kubectl api-resources
 NAME                              SHORTNAMES                  APIVERSION                        NAMESPACED   KIND
 configmaps                        cm                          v1                                <span class="nb">true         </span>ConfigMap
 namespaces                        ns                          v1                                <span class="nb">false        </span>Namespace
 pods                              po                          v1                                <span class="nb">true         </span>Pod
 secrets                                                       v1                                <span class="nb">true         </span>Secret
 services                          svc                         v1                                <span class="nb">true         </span>Service
 daemonsets                        ds                          apps/v1                           <span class="nb">true         </span>DaemonSet
 deployments                       deploy                      apps/v1                           <span class="nb">true         </span>Deployment
 replicasets                       rs                          apps/v1                           <span class="nb">true         </span>ReplicaSet
 statefulsets                      sts                         apps/v1                           <span class="nb">true         </span>StatefulSet
</pre></table></code></div></div><li><p><code class="language-plaintext highlighter-rouge">resources</code> Specifies which Kubernetes resources to access to the user. Same as above api groups, run the <code class="language-plaintext highlighter-rouge">kubectl api-resources</code> command and check the resource name in the <code class="language-plaintext highlighter-rouge">NAME</code> column. For example, <em>deployment</em>, <em>services</em> and so on.</p></ul><p><code class="language-plaintext highlighter-rouge">ClusterRoleBinding</code> Grants the permissions defined in the ClusterRole and assigned to the ServiceAccount user.</p><ul><li><code class="language-plaintext highlighter-rouge">roleRef.apiGroup</code><ul><li>Set the API group of the cluster role (rbac.authorization.k8s.io).</ul><li><code class="language-plaintext highlighter-rouge">roleRef.kind</code><ul><li>Set the resource name of the cluster role (ClusterRole).</ul><li><code class="language-plaintext highlighter-rouge">roleRef.name</code><ul><li>Set the name of the cluster role you configured. In this article, I created an <em>engineer</em> role.</ul><li><code class="language-plaintext highlighter-rouge">subjects.kind</code><ul><li>Set the resource name of service account. (ServiceAccount)</ul><li><code class="language-plaintext highlighter-rouge">subjects.name</code><ul><li>Set the ServiceAccount name you created. In this article, it’s <em>charlie</em>.</ul><li><code class="language-plaintext highlighter-rouge">subjects.namespace</code><ul><li>Set the namespace of your installed ServiceAccount resource. In this article, <em>kube-system</em> namespace.</ul></ul><p>Reference: <a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac">https://kubernetes.io/docs/reference/access-authn-authz/rbac</a></p><h2 id="generating-a-serviceaccount-token">Generating a ServiceAccount Token</h2><p>Previously, we have created a service account <code class="language-plaintext highlighter-rouge">charlie</code> user in the <em>kube-system</em> namespace. Next, we will create a service account token that we need to login and access the Kubernetes cluster and also need to use it in the <em>kubeconfig</em> file.</p><p>Get the service account name you deployed previously.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl get serviceaccounts <span class="nt">--namespace</span> kube-system
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>NAME                                     SECRETS   AGE
...
default                                  0         18d
svclb                                    0         18d
k8s-admin                                0         18d
kubernetes-dashboard-metrics-server      0         18d
kubernetes-dashboard                     0         18d
charlie                                  0         21m
</pre></table></code></div></div><p>Create a service account token for the <code class="language-plaintext highlighter-rouge">charlie</code> user.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl create token charlie <span class="nt">--duration</span><span class="o">=</span>8760h <span class="nt">--output</span> yaml <span class="nt">--namespace</span> kube-system
</pre></table></code></div></div><p>Output:</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">authentication.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">TokenRequest</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">creationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2024-11-25T04:13:16Z"</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">charlie</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">kube-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">audiences</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">https://kubernetes.default.svc.cluster.local</span>
  <span class="pi">-</span> <span class="s">k3s</span>
  <span class="na">boundObjectRef</span><span class="pi">:</span> <span class="kc">null</span>
  <span class="na">expirationSeconds</span><span class="pi">:</span> <span class="m">31536000</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">expirationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-11-25T04:13:16Z"</span>
  <span class="na">token</span><span class="pi">:</span> <span class="s">eyJhbGciOiJSUzI1NiIsImtpZCI6Ii04blMtX1BpVHBQUUNxbXMxSEI3bkxRU1ZfNkVIR09UZGNiazlaWEoyaHMifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJrM3MiXSwiZXhwIjoxNzY0MDQzOTk2LCJpYXQiOjE3MzI1MDc5OTYsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJjaGFybGllIiwidWlkIjoiMDAxOTYyNDUtNzhiNy00NzFkLThjODAtYWFhYWMyM2I2NjJjIn19LCJuYmYiOjE3MzI1MDc5OTYsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjaGFybGllIn0.PokSrN-g4vz-9cl9d7_KuVl3UGh5q2Slww0G68uE4hrocSvrFizmCch4VkKCrzZ7anp9P3nWBvk8WVizo4nN5U_Wn3p-h7_nsvyTrJ7_FflNYS6w8fbfFVKl0vD31MVrpmj40DApkbIepnDKzKfvvNsf00zFoNyi2iB7iIgsrkpUDJyc-o-juHYSIdHwVdhlWSOxmvvq0kf0VITR5wPs5aw02GSUDt2FPxaw-wPFu-3_UrVWTJI0ZgI9D2zzuVDDTvipFn_huRTzPqJN6Q8uHT1dgfaQh86WS8ZqbHuL_oMAxhXLdRwtc07nAm-1lyV3ISjeIicqfli8PZ8IOUWDNQ</span>
</pre></table></code></div></div><p>Make sure you configure <code class="language-plaintext highlighter-rouge">duration</code> when you create the service account token.</p><p>That means the token will expire based on the duration you configured. For example, I’ve set the duration to <code class="language-plaintext highlighter-rouge">8760h</code> (365 days) and created the service account token on November 25, 2024. That token will expire on November 25, 2025.</p><h2 id="deploying-kubernetes-dashboard-ui">Deploying Kubernetes Dashboard UI</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/screenshots/img_screenshot_k8s_dashboard.png" alt="kubernetes-dashboard" /></p><p>Before we use the service account token, make sure you deployed the <a href="https://github.com/kubernetes/dashboard">Kubernetes Dashboard</a>, a general-purpose web UI for Kubernetes clusters. In this article, we will use the Kubernetes dashboard to manage and monitor the Kubernetes cluster.</p><p>You can use the Helm package manager to deploy the Kubernetes dashboard. Please, see <a href="https://github.com/kubernetes/dashboard/blob/master/README.md#installation">https://github.com/kubernetes/dashboard/blob/master/README.md#installation</a>.</p><p>Add the kubernetes-dashboard Helm repository.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>helm repo add kubernetes-dashboard https://kubernetes.github.io/dashboard
</pre></table></code></div></div><p>Deploy the Kubernetes dashboard UI using the kubernetes-dashboard Helm chart.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nv">$ </span>helm <span class="nb">install </span>kubernetes-dashboard <span class="se">\</span>
  kubernetes-dashboard/kubernetes-dashboard <span class="se">\</span>
  <span class="nt">--create-namespace</span> <span class="se">\</span>
  <span class="nt">--namespace</span> kubernetes-dashboard
</pre></table></code></div></div><p>Read more configuration details on the ArtifactHub, <a href="https://artifacthub.io/packages/helm/k8s-dashboard/kubernetes-dashboard">https://artifacthub.io/packages/helm/k8s-dashboard/kubernetes-dashboard</a></p><h2 id="using-serviceaccount-tokens">Using ServiceAccount Tokens</h2><p>We have <strong>two options</strong> to log in to the Kubernetes dashboard to manage and monitor the Kubernetes cluster. You can also use the <em>kubectl</em> client tool to interact with the Kubernetes cluster.</p><ul><li>ServiceAccount Token (Only)<li>Kubeconfig with ServiceAccount Token</ul><h3 id="serviceaccount-token-only">ServiceAccount Token (Only)</h3><p>Make sure you have deployed the Kubernetes dashboard UI on the Kubernete cluster. In the previous section, we have generated the service account token. We can simply use this token to log in to the Kubernetes dashboard.</p><p>Previously, a generated service account token:</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nn">...</span>
<span class="na">status</span><span class="pi">:</span>
  <span class="na">expirationTimestamp</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2025-11-25T04:13:16Z"</span>
  <span class="na">token</span><span class="pi">:</span> <span class="s">eyJhbGciOiJSUzI1NiIsImtpZCI6Ii04blMtX1BpVHBQUUNxbXMxSEI3bkxRU1ZfNkVIR09UZGNiazlaWEoyaHMifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJrM3MiXSwiZXhwIjoxNzY0MDQzOTk2LCJpYXQiOjE3MzI1MDc5OTYsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJjaGFybGllIiwidWlkIjoiMDAxOTYyNDUtNzhiNy00NzFkLThjODAtYWFhYWMyM2I2NjJjIn19LCJuYmYiOjE3MzI1MDc5OTYsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjaGFybGllIn0.PokSrN-g4vz-9cl9d7_KuVl3UGh5q2Slww0G68uE4hrocSvrFizmCch4VkKCrzZ7anp9P3nWBvk8WVizo4nN5U_Wn3p-h7_nsvyTrJ7_FflNYS6w8fbfFVKl0vD31MVrpmj40DApkbIepnDKzKfvvNsf00zFoNyi2iB7iIgsrkpUDJyc-o-juHYSIdHwVdhlWSOxmvvq0kf0VITR5wPs5aw02GSUDt2FPxaw-wPFu-3_UrVWTJI0ZgI9D2zzuVDDTvipFn_huRTzPqJN6Q8uHT1dgfaQh86WS8ZqbHuL_oMAxhXLdRwtc07nAm-1lyV3ISjeIicqfli8PZ8IOUWDNQ</span>
</pre></table></code></div></div><p>Go to the Kubernetes dashboard UI –&gt; <strong>Token</strong> –&gt; Enter token –&gt; Sign in</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/screenshots/img_screenshot_k8s_dashboard_login.png" alt="screenshot-k8s-dashboard-login" /></p><p>Then, you will see <em>system:serviceaccount:kube-system:charlie</em> service account as a logged-in user in the profile.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/screenshots/img_screenshot_k8s_user_charlie.png" alt="screenshot-user-charlie" /></p><h3 id="kubeconfig-with-serviceaccount-token">Kubeconfig with ServiceAccount Token</h3><p>When you’ve bootstrapped and setup a Kubernetes cluster, it sets a default <em>kubeconfig</em> file. But, file location depends on the Kubernetes distribution. For example, in the K3s Kubernetes distribution, the default <em>kubeconfig</em> file location is <code class="language-plaintext highlighter-rouge">/etc/rancher/k3s/k3s.yaml</code>.</p><p>We will create and clone a <em>kubeconfig</em> file named <code class="language-plaintext highlighter-rouge">kubeconfig-charlie</code> from the original K3s kubeconfig <code class="language-plaintext highlighter-rouge">/etc/rancher/k3s/k3s.yaml</code> file. Then, we will set and replace the default <em>admin</em> user with <em>Charlie</em> and its token. Then, <em>Charlie</em> can access the Kubernetes cluster as a read-only or view-only user using the <em>kubeconfig</em> file.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Config</span>
<span class="na">clusters</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">cluster</span><span class="pi">:</span>
    <span class="na">certificate-authority-data</span><span class="pi">:</span> <span class="s">LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJkekNDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdGMyVnkKZG1WeUxXTmhRREUyTmpBd05qRTFNVFV3SGhjTk1qSXdPREE1TVRZeE1UVTFXaGNOTXpJd09EQTJNVFl4TVRVMQpXakFqTVNFd0h3WURWUVFEREJock0zTXRjMlZ5ZG1WeUxXTmhRREUyTmpBd05qRTFNVFV3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFSUW1wQnBRY3lhL0dUa2FPL2JLSGNHc2tac2M0UHpaNElYc3ZQVVQzMUoKNjNVb3AxQXZ4WlhObDhoRWk1ZkxFL2s1WC8zSnNreE5aSHJmSHVoY0lKODVvMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVWlJUkN0QU50VEZPR3cycEZ1ZGxQCmhZWXIzQTR3Q2dZSUtvWkl6ajBFQXdJRFNBQXdSUUloQUtPTUVNRjVmaUxkc0JxV0lpL0k5VnNJQS9BWEVLWEUKVXhSajJYQ2szUnQ4QWlBcDQ4SFZjRytodXIvS2hZaTVnSUZ3Vk1wUGYyWHV3WE1SRk5wV09kZEZ6Zz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K</span>
    <span class="na">server</span><span class="pi">:</span> <span class="s">https://&lt;k3s_server_address&gt;:6443</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">k3s-dev-cluster</span>
<span class="na">contexts</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">context</span><span class="pi">:</span>
    <span class="na">cluster</span><span class="pi">:</span> <span class="s">k3s-dev-cluster</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s">charlie</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">k3s-dev-cluster</span>
<span class="na">current-context</span><span class="pi">:</span> <span class="s">k3s-dev-cluster</span>
<span class="na">preferences</span><span class="pi">:</span> <span class="pi">{}</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">charlie</span>
  <span class="na">user</span><span class="pi">:</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">eyJhbGciOiJSUzI1NiIsImtpZCI6Ii04blMtX1BpVHBQUUNxbXMxSEI3bkxRU1ZfNkVIR09UZGNiazlaWEoyaHMifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJrM3MiXSwiZXhwIjoxNzY0MDQzOTk2LCJpYXQiOjE3MzI1MDc5OTYsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJjaGFybGllIiwidWlkIjoiMDAxOTYyNDUtNzhiNy00NzFkLThjODAtYWFhYWMyM2I2NjJjIn19LCJuYmYiOjE3MzI1MDc5OTYsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjaGFybGllIn0.PokSrN-g4vz-9cl9d7_KuVl3UGh5q2Slww0G68uE4hrocSvrFizmCch4VkKCrzZ7anp9P3nWBvk8WVizo4nN5U_Wn3p-h7_nsvyTrJ7_FflNYS6w8fbfFVKl0vD31MVrpmj40DApkbIepnDKzKfvvNsf00zFoNyi2iB7iIgsrkpUDJyc-o-juHYSIdHwVdhlWSOxmvvq0kf0VITR5wPs5aw02GSUDt2FPxaw-wPFu-3_UrVWTJI0ZgI9D2zzuVDDTvipFn_huRTzPqJN6Q8uHT1dgfaQh86WS8ZqbHuL_oMAxhXLdRwtc07nAm-1lyV3ISjeIicqfli8PZ8IOUWDNQ</span>
</pre></table></code></div></div><p>Previously, we have created a service account named <code class="language-plaintext highlighter-rouge">charlie</code> and generated its token. We will use them in the <em>kubeconfig</em> file. Make sure you set the service account <strong>user</strong> name and its <strong>token</strong> in the <em>kubeconfig-charlie</em> file like this.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nn">...</span>
<span class="na">contexts</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">context</span><span class="pi">:</span>
    <span class="na">cluster</span><span class="pi">:</span> <span class="s">k3s-dev-cluster</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s">charlie</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">k3s-dev-cluster</span>
<span class="nn">...</span>
<span class="na">users</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">charlie</span>
  <span class="na">user</span><span class="pi">:</span>
    <span class="na">token</span><span class="pi">:</span> <span class="s">eyJhbGciOiJSUzI1NiIsImtpZCI6Ii04blMtX1BpVHBQUUNxbXMxSEI3bkxRU1ZfNkVIR09UZGNiazlaWEoyaHMifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNsdXN0ZXIubG9jYWwiLCJrM3MiXSwiZXhwIjoxNzY0MDQzOTk2LCJpYXQiOjE3MzI1MDc5OTYsImlzcyI6Imh0dHBzOi8va3ViZXJuZXRlcy5kZWZhdWx0LnN2Yy5jbHVzdGVyLmxvY2FsIiwia3ViZXJuZXRlcy5pbyI6eyJuYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsInNlcnZpY2VhY2NvdW50Ijp7Im5hbWUiOiJjaGFybGllIiwidWlkIjoiMDAxOTYyNDUtNzhiNy00NzFkLThjODAtYWFhYWMyM2I2NjJjIn19LCJuYmYiOjE3MzI1MDc5OTYsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpjaGFybGllIn0.PokSrN-g4vz-9cl9d7_KuVl3UGh5q2Slww0G68uE4hrocSvrFizmCch4VkKCrzZ7anp9P3nWBvk8WVizo4nN5U_Wn3p-h7_nsvyTrJ7_FflNYS6w8fbfFVKl0vD31MVrpmj40DApkbIepnDKzKfvvNsf00zFoNyi2iB7iIgsrkpUDJyc-o-juHYSIdHwVdhlWSOxmvvq0kf0VITR5wPs5aw02GSUDt2FPxaw-wPFu-3_UrVWTJI0ZgI9D2zzuVDDTvipFn_huRTzPqJN6Q8uHT1dgfaQh86WS8ZqbHuL_oMAxhXLdRwtc07nAm-1lyV3ISjeIicqfli8PZ8IOUWDNQ</span>
</pre></table></code></div></div><p>Then, you can access the Kubernetes cluster with this <em>kubeconfig</em> file using the Kubernetes dashboard or kubectl command-line tool.</p><p>To log in to the Kubernetes dashboard with the <em>kubeconfig</em> file, same as in the previous section, log in with the token.</p><p>Go to the Kubernetes dashboard –&gt; <strong>Kubeconfig</strong> –&gt; Choose the kubeconfig file –&gt; Sign in</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/screenshots/img_screenshot_k8s_kubeconfig.png" alt="screenshot-k8s-kubeconfig" /></p><h2 id="demo-testing-configured-rbac-bindings">Demo: Testing Configured RBAC Bindings</h2><p>In this section, we will demonstrate whether service account tokens with RBAC role bindings are working or not. We can use both the Kubernetes dashboard UI and the kubectl command-line tool to interact with the Kubernetes cluster.</p><h3 id="listing-pods-from-all-namespaces">Listing Pods from All Namespaces</h3><p>Firstly, we need to set the <code class="language-plaintext highlighter-rouge">KUBECONFIG</code> environment variable to the <em>kubeconfig</em> file if you want to use the kubectl command-line tool. For example,</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">export </span><span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/kubeconfig-charlie
</pre></table></code></div></div><p>Then, we can verify the current context and cluster with kubectl.</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl config view
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: DATA+OMITTED
    server: https://&lt;k3s_server_address&gt;:6443
  name: k3s-dev-cluster
contexts:
- context:
    cluster: k3s-dev-cluster
    user: charlie
  name: k3s-dev-cluster
current-context: k3s-dev-cluster
kind: Config
preferences: <span class="o">{}</span>
<span class="nb">users</span>:
- name: charlie
  user:
    token: REDACTED
</pre></table></code></div></div><p>We will list Pods from all namespaces with the kubectl tool. (Or) If you want to use the dashboard, go to the Kubernetes dashboard UI –&gt; Pods –&gt; Select <em>All namespaces</em></p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl get pods <span class="nt">--all-namespaces</span>
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre>NAMESPACE           NAME                                                              READY   STATUS                  RESTARTS        AGE
kube-system         svclb-loki-stack-fccf98b8-g596j                                   1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     24d
kube-system         svclb-coredns-infra-9b5a1b8e-t7zvr                                2/2     Running                 2 <span class="o">(</span>15d ago<span class="o">)</span>     141d
kube-system         svclb-chatwoot-6f5e1870-qs8nt                                     1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     173d
kube-system         svclb-ingress-nginx-controller-9eb0868a-76x45                     5/5     Running                 5 <span class="o">(</span>15d ago<span class="o">)</span>     48d
kube-system         svclb-coredns-infra-9b5a1b8e-jllth                                2/2     Running                 2 <span class="o">(</span>15d ago<span class="o">)</span>     67d
kube-system         svclb-ingress-nginx-controller-9eb0868a-gnfzp                     5/5     Running                 5 <span class="o">(</span>15d ago<span class="o">)</span>     48d
dev                 chatwoot-client-7c5464856d-p2xdd                                  1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     67d
kube-system         svclb-chatwoot-6f5e1870-c2sfg                                     1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     67d
kube-system         svclb-loki-stack-fccf98b8-8kdgf                                   1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     24d
kube-system         svclb-kafka-infra-controller-0-external-8796a87b-rq7d8            1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     67d
monitoring-system   kube-prometheus-stack-prometheus-node-exporter-zrlnh              1/1     Running                 2 <span class="o">(</span>15d ago<span class="o">)</span>     67d
openebs             openebs-ndm-operator-7ddccf59c4-64664                             1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     56d
monitoring-system   kube-prometheus-stack-prometheus-node-exporter-rx4cp              1/1     Running                 9 <span class="o">(</span>15d ago<span class="o">)</span>     471d
argocd              argocd-notifications-controller-f95dc686f-tprcj                   1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     56d
argocd              argocd-dex-server-9595746ff-h7rcp                                 1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     56d
kube-system         svclb-loki-stack-fccf98b8-nz6hb                                   1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     24d
loki-stack          loki-stack-promtail-sf52l                                         1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     67d
kube-system         svclb-kafka-infra-controller-0-external-8796a87b-wdbrh            1/1     Running                 2 <span class="o">(</span>15d ago<span class="o">)</span>     173d
openebs             openebs-localpv-provisioner-686b564b5d-7llqf                      1/1     Running                 1 <span class="o">(</span>15d ago<span class="o">)</span>     56d
</pre></table></code></div></div><p>You can also list any other Kubernetes resources like <em>Deployments</em>, <em>DemonSets</em>, <em>StatefulSets</em>, <em>ConfigMaps</em>, <em>Services</em>, <em>Ingresses</em>, and so on. And note that we have also allowed to view Pods logs.</p><h3 id="deleting-or-restarting-pods">Deleting or Restarting Pods</h3><p>We will also test deleting or restarting the Pod resources with the kubectl client tool. (Or) If you want to use the dashboard, go to the Kubernetes dashboard UI –&gt; Pods –&gt; Select Namespace –&gt; Click any Pod –&gt; Delete resource</p><p>For example,</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl delete pod kube-prometheus-stack-prometheus-node-exporter-qt44p <span class="nt">--namespace</span> monitoring-system
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Error from server <span class="o">(</span>Forbidden<span class="o">)</span>: pods <span class="s2">"kube-prometheus-stack-prometheus-node-exporter-qt44p"</span> is forbidden: User <span class="s2">"system:serviceaccount:kube-system:charlie"</span> cannot delete resource <span class="s2">"pods"</span> <span class="k">in </span>API group <span class="s2">""</span> <span class="k">in </span>the namespace <span class="s2">"monitoring-system"</span>
</pre></table></code></div></div><p>You cannot delete or restart Pods because we are ONLY allowed to <em>get</em>, <em>list</em> and <em>watch</em> the API resources such as Pods, ConfigmMaps, Services, and so on in the default API group in the <em>engineer</em> ClusterRole that binds to the <em>charlie</em> user also known as service account.</p><h3 id="listing-and-viewing-secrets">Listing and Viewing Secrets</h3><p>We will also test listing or viewing the Secret resources with the kubectl client tool. (Or) If you want to use the dashboard, go to the Kubernetes dashboard UI –&gt; Secrets –&gt; Select any namespace</p><p>For example,</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>kubectl get secrets <span class="nt">--all-namespaces</span>
</pre></table></code></div></div><p>Output:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>Error from server <span class="o">(</span>Forbidden<span class="o">)</span>: secrets is forbidden: User <span class="s2">"system:serviceaccount:kube-system:charlie"</span> cannot list resource <span class="s2">"secrets"</span> <span class="k">in </span>API group <span class="s2">""</span> at the cluster scope
</pre></table></code></div></div><p>You cannot also list or view the Secret resources because we have not allowed to <em>list</em> the Secret resources in the default API group in the <em>engineer</em> ClusterRole that binds to the <em>charlie</em> user also known as service account. So, Charlie cannot list the Secret resources.</p><p>Finally, we can confirm that the <em>charlie</em> ServiceAccount with ClusterRole and Role Bindings configuration are working properly.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/kubernetes/'>Kubernetes</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/cluster/" class="post-tag no-text-decoration" >cluster</a> <a href="/tags/auth/" class="post-tag no-text-decoration" >auth</a> <a href="/tags/rbac/" class="post-tag no-text-decoration" >rbac</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Configuring RBAC Role Bindings for a User on Kubernetes - Zaw Zaw&url=https://zawzaw.blog/posts/configure-k8s-auth-rbac/" data-toggle="tooltip" data-placement="top" title="X (Twitter)" target="_blank" rel="noopener" aria-label="X (Twitter)"> <i class="fa-fw fab fa-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Configuring RBAC Role Bindings for a User on Kubernetes - Zaw Zaw&u=https://zawzaw.blog/posts/configure-k8s-auth-rbac/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://zawzaw.blog/posts/configure-k8s-auth-rbac/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2" style="font-size: large;">Table of Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Related Posts</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/write-k8s-helm-chart/"><div class="card-body"> <span class="timeago small" > Feb 14, 2022 <i class="unloaded">2022-02-14T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Building a Kubernetes Helm Chart from Scratch</h3><div class="text-muted small"><p> In this blog post, I will share about writing Kubernetes Helm chart, YAML-based Helm template language, Helm chart development tips and focus on how to write a simple Helm Chart step by step for an...</p></div></div></a></div><div class="card"> <a href="/posts/automated-k3s-cluster-upgrades/"><div class="card-body"> <span class="timeago small" > Feb 25, 2024 <i class="unloaded">2024-02-25T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bootstrapping a K3s Cluster and Configuring its Automated Upgrades</h3><div class="text-muted small"><p> This article focuses on how to setup and bootstrap the multi-node K3s cluster and how to configure automated upgrading of the K3s Kubernetes cluster. This covers both how to setup a multi-node K3s ...</p></div></div></a></div><div class="card"> <a href="/posts/guide-k8s-persistent-storage/"><div class="card-body"> <span class="timeago small" > Jan 31 <i class="unloaded">2025-01-31T00:00:00+00:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>A Hands-on Practical Guide to K8s Persistent Storage</h3><div class="text-muted small"><p> In Kubernetes, we typically need to create and use Persistent Volumes for stateful applications such as database servers, cache store servers, and so on. In this article, I will share how storage p...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/explore-the-philippines/" class="btn btn-outline-primary" prompt="Older"><p>Exploring the Philippines: My Travel Experience to Iloilo City</p></a> <a href="/posts/guide-k8s-persistent-storage/" class="btn btn-outline-primary" prompt="Newer"><p>A Hands-on Practical Guide to K8s Persistent Storage</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025, <a href="https://github.com/zawzaww">Zaw Zaw</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) by the author.">Licensed under CC BY 4.0.</span></p></div><div class="footer-right"><p class="mb-0"> <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">CHIRPY Theme</a> &mdash; <a href="https://jekyllrb.com" target="_blank" rel="noopener"> Powered byJekyll</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/kernel/">kernel</a> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/aosp/">aosp</a> <a class="post-tag" href="/tags/build/">build</a> <a class="post-tag" href="/tags/containerization/">containerization</a> <a class="post-tag" href="/tags/containers/">containers</a> <a class="post-tag" href="/tags/networking/">networking</a> <a class="post-tag" href="/tags/asia/">asia</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zawzaw.blog{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
